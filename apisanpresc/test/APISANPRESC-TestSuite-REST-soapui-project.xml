<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="a07faf26-5562-4ecb-975b-8deacc2cb983" activeEnvironment="Default" name="APISANPRESC-TestSuite" resourceRoot="" soapui-version="5.5.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="WsdlSettings@cache-wsdls">false</con:setting></con:settings><con:interface xsi:type="con:RestService" id="1b9fd540-0401-4dfa-a2c4-710ced71034d" wadlVersion="http://wadl.dev.java.net/2009/02" name="Promemoria Ricette" type="rest" basePath="/ricette/api/v1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:description><![CDATA[API per il servizio di Promemoria Ricette Elettroniche. <br><br>

### Breve spiegazione del servizio.
Dal momento che __il back-end deve prendere i dati da due _"bidoni"_ diversi (FSE e SAR)__ è stato deciso, per semplicità e performance, di strutturare le richieste in modo che il back-end vada a pescare da un _"bidone"_ alla volta. Per questo motivo non è possibile ottenere una lista che contenga contemporaneamente le ricette farmaceutiche (_bidone 1_) e quelle specialistiche (_bidone 2_).

Inoltre un altro requisito prevede la possibilità per il cittadino di visualizzare sia le ricette regionali che quelle non regionali. __Per visualizzare le ricette non regionali il cittadino deve avere il FSE aperto__. Da notare che se il cittadino ha appena aperto il FSE, non è detto che veda le ricette compilate nel passato. Infatti bisogna distinguere due casistiche:

  1. L'utente apre il FSE con il flag `recupero_pregresso: false`.
    In questo caso il cittadino vedrà solo le ricette non regionali compilate __dopo__ l'apertura del FSE

  2. L'utente apre il FSE con il flag `recupero_pregresso: true`.
    In questo caso il cittadino vedrà anche le ricette non regionali compilate __prima__ dell'apertura del 
    FSE. I dati però vengono popolati solo dopo l'esecuzione di un batch notturno.

-----
Riassumendo tutte le casistiche ed i vincoli:

  1. __Ricette regionali -> Specialistiche__:

      * Necessita di un filtro temporale, sulla campo `data_compilazione`, 
      per evitare di ottenere dati non coerenti e/o per velocizzare la chiamata


  2. __Ricette regionali -> Farmaceutiche__

      * Non contengono lo stato

  3. __Ricette non regionali -> Specialistiche__

      * Necessita di un filtro temporale, sulla campo `data_compilazione`, 
      per evitare di ottenere dati non coerenti e/o per velocizzare la chiamata
      * Necessario il FSE aperto
      * Alcuni dati non si possono ottenere. Per questo motivo viene impostato il flag `completa` a `false`. In questo caso il front-end può far notare all'utente che sta visualizzando una ricetta che non contiene tutti i dati

  4. __Ricette non regionali -> Farmaceutiche__

      * Non contengono lo stato
      * Necessario il FSE aperto
      * Alcuni dati non si possono ottenere. Per questo motivo viene impostato il flag `completa` a `false`. In questo caso il front-end può far notare all'utente che sta visualizzando una ricetta che non contiene tutti i dati

----
### Breve guida all'uso delle API.
#### Lista ricette
Il client, per ottenere l'elenco di tutte le ricette regionali, deve effettuare 2 chiamate e poi fare il merge in locale

  ```
  # Lista ricette regionali farmaceutiche
  GET /cittadini/{cf}/ricette?filter={"tipologia": {"eq": "F"}, "regionale": {"eq": true}}

  # Lista ricette regionali specialistiche dell'ultimo anno
  GET /cittadini/{cf}/ricette?filter={"tipologia": {"eq": "P"}, "regionale": {"eq": true}, "data_compilazione": {"gte": "2018-04-11T15:33:33.959Z", "lte": "2019-04-11T15:33:33.959Z"}}
  ```

Il client prima di richiedere le ricette non regionali deve controllare che il cittadino abbia aperto il FSE. Dopodichè per ottenere tutte le ricette non regionali deve effettuare 2 chiamate e poi fare il merge in locale

  ```
  # Lista ricette non regionali farmaceutiche
  GET /cittadini/{cf}/ricette?filter={"tipologia": {"eq": "F"}, "regionale": {"eq": false}}

  # Lista ricette non regionali specialistiche degli ultimi 3 mesi
  GET /cittadini/{cf}/ricette?filter={"tipologia": {"eq": "P"}, "regionale": {"eq": false}, "data_compilazione": {"gte": "2019-01-11T15:33:33.959Z", "lte": "2019-04-11T15:33:33.959Z"}}
  ```

Quindi per ottenere tutte le ricette il client dovrà effettuare 4 chiamate.
#### Dettaglio e PDF ricetta
Per lo stesso motivo, nel momento in cui si richiede la singola ricetta o il PDF il fruitore dovrà passare la tipologia ed il flag di regionalità:

  ```
  # per ottenere una ricetta che sappiamo essere regionale di tipo farmaceutico
  GET /cittadini/{cf}/ricette/{nre}?filter={"tipologia": {"eq": "F"}, "regionale": {"eq": true}}

  # per ottenere il PDF di una ricetta che sappiamo essere non regionale e di tipo specialistica
  GET /cittadini/{cf}/ricette/{nre}/pdf?filter={"tipologia": {"eq": "P"}, "regionale": {"eq": false}}
  ```



Al contrario, non è necessario passare la tipologia e la regionalità quando si chiede di cambiare lo stato del flag `nascosta` nella ricetta dal momento che è un dato gestito direttamente dal back-end

  ```
  # Per impostare una ricetta come nascosta
  GET /cittadini/{cf}/ricette/{nre}/nascosta
  {nascosta: true}

  # Per riattivare una ricetta nascosta
  GET /cittadini/{cf}/ricette/{nre}/nascosta
  {nascosta: false}
  ```


Infine dal momento che il numero di ricette per cittadino non è elevato  si è pensato di gestire i filtri completamente lato client. 

<br> <br> <sub>  Note: Questo YAML è stato pensato esclusivamente per il front-end destinato al cittadino.  </sub>
]]></con:description><con:settings/><con:endpoints><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint></con:endpoints><con:resource name="/cittadini/{citId}/ricette" path="/cittadini/{citId}/ricette" id="ed3b7903-5f36-48b3-b98c-d839f6d30b8f"><con:settings/><con:parameters><con:parameter><con:name>X-Forwarded-For</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="93bddf99-6d48-416e-a78a-e5f2967c647b" method="GET"><con:description>Dato un cittadino, il cui codice fiscale è quello presente nel path {citId}, restituisce la lista delle ricette in cui lui è l'assistito.
Inoltre nella querystring dev'essere presente il parametro `tipologia` che indica quale lista di ricette vogliamo richiedere ed il parametro `regionale` che indica se vogliamo richiedere le ricette regionali o meno.

Lista ricette</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>Shib-Identita-CodiceFiscale</con:name><con:style>HEADER</con:style><con:description>Contiene il codice fiscale dell'utente loggato ottenuto tramite shibboleth</con:description></con:parameter><con:parameter required="true"><con:name>X-Codice-Servizio</con:name><con:style>HEADER</con:style><con:description>Contiene una stringa identificativa del servizio chiamante (es.SANSOL)</con:description></con:parameter><con:parameter required="true"><con:name>X-Request-ID</con:name><con:style>HEADER</con:style><con:description>Contiene un id univoco (`uuid v4`) della chiamata HTTP che viene generato dal front-end, viene propagato agli strati successivi e viene restituito al front-end assieme alla response, permettendo così di tracciare l'intero ciclo di vita della richiesta</con:description></con:parameter><con:parameter required="true"><con:name>citId</con:name><con:value>CRPYNN77A61B791K</con:value><con:style>TEMPLATE</con:style><con:default>CRPYNN77A61B791K</con:default><con:description>Il codice fiscale del cittadino su cui operare</con:description></con:parameter><con:parameter required="true"><con:name>filter</con:name><con:style>QUERY</con:style><con:description>Un oggetto JSON encoded come definito nel model &lt;code>[Filtri] ricetta&lt;/code>.

I campi `tipologia` e `regionale` vanno sempre passati.
Invece il campo `data_compilazione` va passato solo per le ricette di tipo "specialistiche"
</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404 500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>403 500 404 400</con:status><con:params/><con:element xmlns:ric="http://localhost/ricette/api/v1/cittadini/CRPYNN77A61B791K/ricette">ric:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="SAR" id="5aa1923b-3d55-4a4a-a2ad-a7afb4fe25ae" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/ricette/api/v1/cittadini/CRPYNN77A61B791K/ricette</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;P&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: true}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-04-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="AAAAAA00B77B000F"/>
  <con:entry key="X-Forwarded-For" value="127.0.0.1"/>
  <con:entry key="citId" value="SHNKSH84A27Z100H"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters><con:parameterOrder><con:entry>Shib-Identita-CodiceFiscale</con:entry><con:entry>X-Codice-Servizio</con:entry><con:entry>X-Request-ID</con:entry><con:entry>citId</con:entry><con:entry>filter</con:entry><con:entry>X-Forwarded-For</con:entry></con:parameterOrder></con:request><con:request name="SAR-DMA" id="5aa1923b-3d55-4a4a-a2ad-a7afb4fe25ae" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/ricette/api/v1/cittadini/CRPYNN77A61B791K/ricette</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;F&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: true}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-01-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="CRPYNN77A61B791K"/>
  <con:entry key="X-Forwarded-For" value="127.0.0.1"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters><con:parameterOrder><con:entry>Shib-Identita-CodiceFiscale</con:entry><con:entry>X-Codice-Servizio</con:entry><con:entry>X-Request-ID</con:entry><con:entry>citId</con:entry><con:entry>filter</con:entry><con:entry>X-Forwarded-For</con:entry></con:parameterOrder></con:request><con:request name="DMA" id="5aa1923b-3d55-4a4a-a2ad-a7afb4fe25ae" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/ricette/api/v1/cittadini/CRPYNN77A61B791K/ricette</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;F&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: false}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-04-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="CRPYNN77A61B791K"/>
  <con:entry key="X-Forwarded-For" value="127.0.0.1"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters><con:parameterOrder><con:entry>Shib-Identita-CodiceFiscale</con:entry><con:entry>X-Codice-Servizio</con:entry><con:entry>X-Request-ID</con:entry><con:entry>citId</con:entry><con:entry>filter</con:entry><con:entry>X-Forwarded-For</con:entry></con:parameterOrder></con:request><con:request name="RicettePerPDF" id="15d0d6a5-0f77-4729-9fd1-9252745a3a8b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/apisanpresc/ricette/api/v1/cittadini/CRPYNN77A61B791K/ricette</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;P&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: &quot;true&quot;}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-01-11&quot;, &quot;lte&quot;: &quot;2019-12-30&quot;}}"/>
  <con:entry key="X-Request-ID" value="LLNSRN61S48A337W"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="LLNSRN61S48A337W"/>
  <con:entry key="X-Forwarded-For" value="127.0.0.1"/>
  <con:entry key="citId" value="LLNSRN61S48A337W"/>
  <con:entry key="X-Codice-Servizio" value="LLNSRN61S48A337W"/>
</con:parameters><con:parameterOrder><con:entry>Shib-Identita-CodiceFiscale</con:entry><con:entry>X-Codice-Servizio</con:entry><con:entry>X-Request-ID</con:entry><con:entry>citId</con:entry><con:entry>filter</con:entry><con:entry>X-Forwarded-For</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/cittadini/{citId}/ricette/{nre}" path="/cittadini/{citId}/ricette/{nre}" id="9a8fe767-3c5a-45be-898d-294ad925e7f3"><con:settings/><con:parameters><con:parameter><con:name>Shib-Identita-CodiceFiscale</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>X-Codice-Servizio</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>X-Request-ID</con:name><con:value/><con:style>HEADER</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>citId</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>filter</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>nre</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="GET" id="d439815a-c719-48c0-8241-25b773fbe4d4" method="GET"><con:description>Permette di ottenere una singola ricetta per {nre}

Dettaglio ricetta</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500 404</con:status><con:params/><con:element xmlns:apis="http://localhost/apisanpresc/">apis:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="SAR" id="f59deac6-3e07-40e8-9af0-514f3f2cfa82" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/apisanpresc/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;P&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: true}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-04-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="nre" value="010D14019800054"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="AAAAAA00B77B000F"/>
  <con:entry key="citId" value="SHNKSH84A27Z100H"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters><con:parameterOrder><con:entry>X-Codice-Servizio</con:entry><con:entry>X-Request-ID</con:entry><con:entry>citId</con:entry><con:entry>filter</con:entry><con:entry>nre</con:entry><con:entry>Shib-Identita-CodiceFiscale</con:entry></con:parameterOrder></con:request><con:request name="SAR-DMA" id="f59deac6-3e07-40e8-9af0-514f3f2cfa82" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/apisanpresc/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;F&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: true}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-04-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="nre" value="010D00000000245"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="CRPYNN77A61B791K"/>
  <con:entry key="citId" value="CRPYNN77A61B791K"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters><con:parameterOrder><con:entry>X-Codice-Servizio</con:entry><con:entry>X-Request-ID</con:entry><con:entry>citId</con:entry><con:entry>filter</con:entry><con:entry>nre</con:entry><con:entry>Shib-Identita-CodiceFiscale</con:entry></con:parameterOrder></con:request><con:request name="DMA" id="f59deac6-3e07-40e8-9af0-514f3f2cfa82" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/apisanpresc/</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;F&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: false}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-04-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="nre" value="010D14019800054"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="AAAAAA00B77B000F"/>
  <con:entry key="citId" value="SHNKSH84A27Z100H"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters><con:parameterOrder><con:entry>X-Codice-Servizio</con:entry><con:entry>X-Request-ID</con:entry><con:entry>citId</con:entry><con:entry>filter</con:entry><con:entry>nre</con:entry><con:entry>Shib-Identita-CodiceFiscale</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/cittadini/{citId}/ricette/{nre}/nascosta" path="/cittadini/{citId}/ricette/{nre}/nascosta" id="e200d6f7-1c52-46f3-b896-f2781a68fabe"><con:settings/><con:parameters/><con:method name="nascondiRicetta" id="1ba746ff-c6a7-45f2-845c-c23f488b8579" method="PUT"><con:description>Cambia lo stato del flag nascosta dalla ricetta.

Esempi

1. Impostare una ricetta come nascosta
  ```
  POST /cittadini/{cit}/ricette/{nre}/nascosta

  {nascosta: true}
  ```

2. Ripristinare una ricetta nascosta
  ```
  POST /cittadini/{cit}/ricette/{nre}/nascosta

  {nascosta: false}
  ```

Nascondi ricetta</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>Shib-Identita-CodiceFiscale</con:name><con:style>HEADER</con:style><con:description>Contiene il codice fiscale dell'utente loggato ottenuto tramite shibboleth</con:description></con:parameter><con:parameter required="true"><con:name>X-Codice-Servizio</con:name><con:style>HEADER</con:style><con:description>Contiene una stringa identificativa del servizio chiamante (es.SANSOL)</con:description></con:parameter><con:parameter required="true"><con:name>X-Request-ID</con:name><con:style>HEADER</con:style><con:description>Contiene un id univoco (`uuid v4`) della chiamata HTTP che viene generato dal front-end, viene propagato agli strati successivi e viene restituito al front-end assieme alla response, permettendo così di tracciare l'intero ciclo di vita della richiesta</con:description></con:parameter><con:parameter required="true"><con:name>citId</con:name><con:style>TEMPLATE</con:style><con:description>Il codice fiscale del cittadino su cui operare</con:description></con:parameter><con:parameter required="true"><con:name>nre</con:name><con:style>TEMPLATE</con:style><con:description>Identificativo della ricetta (NRE)</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:nas="http://localhost/apisanpresc/ricette/api/v1/cittadini/SHNKSH84A27Z100H/ricette/010D14019800054/nascosta">nas:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="d5b471f2-676a-4090-a7a1-ce5f3efb8e57" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request>{
	"nascosta":true
}
</con:request><con:originalUri>http://localhost/apisanpresc/ricette/api/v1/cittadini/SHNKSH84A27Z100H/ricette/010D14019800054/nascosta</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="nre" value="010D00000000245"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="AAAAAA00B77B000F"/>
  <con:entry key="citId" value="SHNKSH84A27Z100H"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/cittadini/{citId}/ricette/{nre}/pdf" path="/cittadini/{citId}/ricette/{nre}/pdf" id="64a44634-c22a-4d39-81fe-d67e31ccf11d"><con:settings/><con:parameters/><con:method name="GET" id="5ababe2b-47be-48f6-bb0c-76594dacdf93" method="GET"><con:description>Permette di ottenere il PDF dellla ricetta.
Questa funzionalità permetterà all'utente di salvare il PDF o stamparlo.

Ricetta in formato pdf</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>Shib-Identita-CodiceFiscale</con:name><con:style>HEADER</con:style><con:description>Contiene il codice fiscale dell'utente loggato ottenuto tramite shibboleth</con:description></con:parameter><con:parameter required="true"><con:name>X-Codice-Servizio</con:name><con:style>HEADER</con:style><con:description>Contiene una stringa identificativa del servizio chiamante (es.SANSOL)</con:description></con:parameter><con:parameter required="true"><con:name>X-Request-ID</con:name><con:style>HEADER</con:style><con:description>Contiene un id univoco (`uuid v4`) della chiamata HTTP che viene generato dal front-end, viene propagato agli strati successivi e viene restituito al front-end assieme alla response, permettendo così di tracciare l'intero ciclo di vita della richiesta</con:description></con:parameter><con:parameter required="true"><con:name>citId</con:name><con:style>TEMPLATE</con:style><con:description>Il codice fiscale del cittadino su cui operare</con:description></con:parameter><con:parameter required="true"><con:name>nre</con:name><con:style>TEMPLATE</con:style><con:description>Identificativo della ricetta (NRE)</con:description></con:parameter><con:parameter required="true"><con:name>filter</con:name><con:style>QUERY</con:style><con:description>Un oggetto JSON encoded come definito nel model &lt;code>[Filtri] ricetta&lt;/code>.

I campi `tipologia` e `regionale` vanno sempre passati.
Invece il campo `data_compilazione` va passato solo per le ricette di tipo "specialistiche"
</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/pdf</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/pdf</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/pdf</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/pdf</con:mediaType><con:status>404</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/pdf</con:mediaType><con:status>500</con:status><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>403 500</con:status><con:params/><con:element xmlns:pdf="http://localhost/apisanpresc/ricette/api/v1/cittadini/SHNKSH84A27Z100H/ricette/010D14019800054/pdf">pdf:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>500 404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="d3271ffb-57d6-413d-a975-0e61da4bc78e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/apisanpresc/ricette/api/v1/cittadini/SHNKSH84A27Z100H/ricette/010D14019800054/pdf</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="nre" value="010D14015629611"/>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;P&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: true}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-04-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="SHNKSH84A27Z100H"/>
  <con:entry key="citId" value="SHNKSH84A27Z100H"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/stati-ricette" path="/stati-ricette" id="b7fd0807-d8ba-41d3-9016-b8c0b0e727aa"><con:settings/><con:parameters/><con:method name="GET" id="dd359574-3b63-4071-9a57-7848943499a8" method="GET"><con:description>Restituisce la lista dei possibili stati delle ricette elettroniche.
Utile per mostrare dei filtri

Lista degli stati ricette</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>Shib-Identita-CodiceFiscale</con:name><con:style>HEADER</con:style><con:description>Contiene il codice fiscale dell'utente loggato ottenuto tramite shibboleth</con:description></con:parameter><con:parameter required="true"><con:name>X-Codice-Servizio</con:name><con:style>HEADER</con:style><con:description>Contiene una stringa identificativa del servizio chiamante (es.SANSOL)</con:description></con:parameter><con:parameter required="true"><con:name>X-Request-ID</con:name><con:style>HEADER</con:style><con:description>Contiene un id univoco (`uuid v4`) della chiamata HTTP che viene generato dal front-end, viene propagato agli strati successivi e viene restituito al front-end assieme alla response, permettendo così di tracciare l'intero ciclo di vita della richiesta</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/></con:representation><con:request name="Request 1" id="406f3cc6-d289-4013-8944-2bedb42caa4b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="/tipologie-ricette" path="/tipologie-ricette" id="811da9e3-bc7a-42d3-a656-9e77aef30842"><con:settings/><con:parameters/><con:method name="GET" id="f84a3cd2-d4aa-476a-a2d5-327dd7c4ad70" method="GET"><con:description>Restituisce la lista delle possibili tipologie delle ricette elettroniche.
Utile per mostrare dei filtri

Lista tipologie ricette</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>Shib-Identita-CodiceFiscale</con:name><con:style>HEADER</con:style><con:description>Contiene il codice fiscale dell'utente loggato ottenuto tramite shibboleth</con:description></con:parameter><con:parameter required="true"><con:name>X-Codice-Servizio</con:name><con:style>HEADER</con:style><con:description>Contiene una stringa identificativa del servizio chiamante (es.SANSOL)</con:description></con:parameter><con:parameter required="true"><con:name>X-Request-ID</con:name><con:style>HEADER</con:style><con:description>Contiene un id univoco (`uuid v4`) della chiamata HTTP che viene generato dal front-end, viene propagato agli strati successivi e viene restituito al front-end assieme alla response, permettendo così di tracciare l'intero ciclo di vita della richiesta</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/></con:representation><con:request name="Request 1" id="9c67c464-f1bf-4ce1-8cb0-2bb2f312210a" mediaType="application/json"><con:settings/><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="95597ac3-67f7-4988-990a-52625a44df70" name="TestSuite 1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="f1bc36c5-19f9-472d-a0ba-f1005afbb5b0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase 1" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GET - Request PDF" id="b3fc4886-45b6-4ee3-b894-f5949cc170b8"><con:settings/><con:config service="Promemoria Ricette" resourcePath="/ricette/api/v1/cittadini/{citId}/ricette/{nre}/pdf" methodName="GET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GET - Request PDF" id="d3271ffb-57d6-413d-a975-0e61da4bc78e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@max-size">0</con:setting><con:setting id="com.eviware.soapui.impl.support.AbstractHttpRequest@dump-file">c:/asd/aaaaaa.pdf</con:setting><con:setting id="com.eviware.soapui.settings.CommonSettings@entitizeProperties">false</con:setting><con:setting id="discardResponse">false</con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@strip-whitespaces">false</con:setting><con:setting id="WsdlSettings@pretty-print-response-xml">false</con:setting></con:settings><con:endpoint>http://localhost:8080/apisanpresc</con:endpoint><con:request/><con:originalUri>http://localhost/apisanpresc/ricette/api/v1/cittadini/SHNKSH84A27Z100H/ricette/010D14019800054/pdf</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="nre" value="010D14015629611"/>
  <con:entry key="filter" value="{&quot;tipologia&quot;: {&quot;eq&quot;: &quot;P&quot;}, &quot;regionale&quot;: {&quot;eq&quot;: true}, &quot;data_compilazione&quot;: {&quot;gte&quot;: &quot;2018-04-11T15:33:33.959Z&quot;, &quot;lte&quot;: &quot;2019-04-11T15:33:33.959Z&quot;}}"/>
  <con:entry key="X-Request-ID" value="f6f0cd51-556f-4efc-b407-8218df76b11d"/>
  <con:entry key="Shib-Identita-CodiceFiscale" value="SHNKSH84A27Z100H"/>
  <con:entry key="citId" value="SHNKSH84A27Z100H"/>
  <con:entry key="X-Codice-Servizio" value="TESTSUITE"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/><con:tearDownScript>import org.apache.commons.codec.binary.Base64; 
import groovy.json.JsonSlurper
//grab the response
def content = messageExchange.response.responseContent
def jsonSlurper = new JsonSlurper().parseText(content)
assert !(jsonSlurper.isEmpty())
document_content = jsonSlurper.fileContent
def fileName = "exportTest.pdf"
new File( "c:\\temp\\$fileName").bytes = document_content.decodeBase64()

log.info fileName</con:tearDownScript></con:testSuite><con:properties><con:property><con:name>citId</con:name><con:value>CRPYNN77A61B791K</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>